# NBA data validation rules

validation_rules:
  # Games table rules
  - type: not_null
    columns: [game_id, game_date, season, home_team_id, away_team_id]
    description: Core game fields must not be null
    
  - type: range
    column: home_score
    min_value: 0
    description: Home score must be non-negative
    
  - type: range
    column: away_score
    min_value: 0
    description: Away score must be non-negative
    
  - type: referential_integrity
    column: home_team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Home team must reference valid team
    
  - type: referential_integrity
    column: away_team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Away team must reference valid team
    
  # Players table rules
  - type: not_null
    columns: [player_id, player_name]
    description: Core player fields must not be null
    
  - type: range
    column: weight
    min_value: 100
    max_value: 400
    description: Player weight must be reasonable
    
  - type: range
    column: age
    min_value: 18
    max_value: 50
    description: Player age must be reasonable
    
  - type: referential_integrity
    column: team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Player team must reference valid team
    
  # Teams table rules
  - type: not_null
    columns: [team_id, team_name, team_abbreviation, conference, division]
    description: Core team fields must not be null
    
  - type: unique
    columns: [team_abbreviation]
    description: Team abbreviation must be unique
    
  # Player game stats rules
  - type: not_null
    columns: [game_id, player_id, team_id]
    description: Core player game stats fields must not be null
    
  - type: range
    column: points
    min_value: 0
    max_value: 150
    description: Points must be reasonable (single game max ~100, but allow buffer)
    
  - type: range
    column: field_goal_percentage
    min_value: 0
    max_value: 1
    description: Field goal percentage must be between 0 and 1
    
  - type: range
    column: three_point_percentage
    min_value: 0
    max_value: 1
    description: Three-point percentage must be between 0 and 1
    
  - type: range
    column: free_throw_percentage
    min_value: 0
    max_value: 1
    description: Free throw percentage must be between 0 and 1
    
  - type: referential_integrity
    column: game_id
    reference_table: nba_games
    reference_column: game_id
    description: Player game stats must reference valid game
    
  - type: referential_integrity
    column: player_id
    reference_table: nba_players
    reference_column: player_id
    description: Player game stats must reference valid player
    
  - type: referential_integrity
    column: team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Player game stats must reference valid team
    
  # Team game stats rules
  - type: not_null
    columns: [game_id, team_id, points]
    description: Core team game stats fields must not be null
    
  - type: range
    column: points
    min_value: 0
    max_value: 200
    description: Team points must be reasonable
    
  - type: range
    column: field_goal_percentage
    min_value: 0
    max_value: 1
    description: Team field goal percentage must be between 0 and 1
    
  - type: referential_integrity
    column: game_id
    reference_table: nba_games
    reference_column: game_id
    description: Team game stats must reference valid game
    
  - type: referential_integrity
    column: team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Team game stats must reference valid team



