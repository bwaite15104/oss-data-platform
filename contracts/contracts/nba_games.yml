version: '1.0'
name: nba_games
schema:
  name: nba_games
  columns:
  - name: game_id
    type: string
    nullable: false
    primary_key: true
    unique: false
    description: Unique game identifier (e.g., "0022300123")
  - name: game_date
    type: date
    nullable: false
    primary_key: false
    unique: false
    description: Date of the game
  - name: season
    type: string
    nullable: false
    primary_key: false
    unique: false
    description: NBA season (e.g., "2023-24")
  - name: season_type
    type: string
    nullable: false
    primary_key: false
    unique: false
    description: Type of season (Regular Season, Playoffs, Play-In)
  - name: home_team_id
    type: integer
    nullable: false
    primary_key: false
    unique: false
    description: Home team ID
  - name: away_team_id
    type: integer
    nullable: false
    primary_key: false
    unique: false
    description: Away team ID
  - name: home_team_name
    type: string
    nullable: false
    primary_key: false
    unique: false
    description: Home team name
  - name: away_team_name
    type: string
    nullable: false
    primary_key: false
    unique: false
    description: Away team name
  - name: home_score
    type: integer
    nullable: true
    primary_key: false
    unique: false
    description: Home team final score
  - name: away_score
    type: integer
    nullable: true
    primary_key: false
    unique: false
    description: Away team final score
  - name: winner_team_id
    type: integer
    nullable: true
    primary_key: false
    unique: false
    description: Winning team ID
  - name: game_status
    type: string
    nullable: false
    primary_key: false
    unique: false
    description: Game status (Final, Scheduled, In Progress)
  - name: venue
    type: string
    nullable: true
    primary_key: false
    unique: false
    description: Venue/arena name
  - name: attendance
    type: integer
    nullable: true
    primary_key: false
    unique: false
    description: Game attendance
  - name: created_at
    type: timestamp
    nullable: false
    primary_key: false
    unique: false
    description: Record creation timestamp
  - name: updated_at
    type: timestamp
    nullable: true
    primary_key: false
    unique: false
    description: Last update timestamp
  primary_key:
  - game_id
  indexes:
  - columns:
    - game_date
  - columns:
    - home_team_id
  - columns:
    - away_team_id
  - columns:
    - season
    - season_type
  description: NBA game results and basic information
quality:
  validation_rules:
  - type: not_null
    columns:
    - game_id
    - game_date
    - season
    - home_team_id
    - away_team_id
    description: Core game fields must not be null
  - type: range
    column: home_score
    min_value: 0
    description: Home score must be non-negative
  - type: range
    column: away_score
    min_value: 0
    description: Away score must be non-negative
  - type: referential_integrity
    column: home_team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Home team must reference valid team
  - type: referential_integrity
    column: away_team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Away team must reference valid team
  - type: not_null
    columns:
    - player_id
    - player_name
    description: Core player fields must not be null
  - type: range
    column: weight
    min_value: 100
    max_value: 400
    description: Player weight must be reasonable
  - type: range
    column: age
    min_value: 18
    max_value: 50
    description: Player age must be reasonable
  - type: referential_integrity
    column: team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Player team must reference valid team
  - type: not_null
    columns:
    - team_id
    - team_name
    - team_abbreviation
    - conference
    - division
    description: Core team fields must not be null
  - type: unique
    columns:
    - team_abbreviation
    description: Team abbreviation must be unique
  - type: not_null
    columns:
    - game_id
    - player_id
    - team_id
    description: Core player game stats fields must not be null
  - type: range
    column: points
    min_value: 0
    max_value: 150
    description: Points must be reasonable (single game max ~100, but allow buffer)
  - type: range
    column: field_goal_percentage
    min_value: 0
    max_value: 1
    description: Field goal percentage must be between 0 and 1
  - type: range
    column: three_point_percentage
    min_value: 0
    max_value: 1
    description: Three-point percentage must be between 0 and 1
  - type: range
    column: free_throw_percentage
    min_value: 0
    max_value: 1
    description: Free throw percentage must be between 0 and 1
  - type: referential_integrity
    column: game_id
    reference_table: nba_games
    reference_column: game_id
    description: Player game stats must reference valid game
  - type: referential_integrity
    column: player_id
    reference_table: nba_players
    reference_column: player_id
    description: Player game stats must reference valid player
  - type: referential_integrity
    column: team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Player game stats must reference valid team
  - type: not_null
    columns:
    - game_id
    - team_id
    - points
    description: Core team game stats fields must not be null
  - type: range
    column: points
    min_value: 0
    max_value: 200
    description: Team points must be reasonable
  - type: range
    column: field_goal_percentage
    min_value: 0
    max_value: 1
    description: Team field goal percentage must be between 0 and 1
  - type: referential_integrity
    column: game_id
    reference_table: nba_games
    reference_column: game_id
    description: Team game stats must reference valid game
  - type: referential_integrity
    column: team_id
    reference_table: nba_teams
    reference_column: team_id
    description: Team game stats must reference valid team
  thresholds:
    drift_low: 5.0
    drift_medium: 15.0
    drift_high: 30.0
    freshness_hours: 24
    availability: 99.9
  profiling_enabled: true
  drift_detection_enabled: true
  drift_detection_strategy: absolute_threshold
metadata:
  owner: data-engineering@company.com
